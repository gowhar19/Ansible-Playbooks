---
 - name: Get the VMware Vcenter VM List
   hosts: localhost
   gather_facts: false
   connection: local
  
   tasks:
    - name: VCenter login
      url:
          url: "https://{{ vcenter_ip }}/rest/com/vmware/cis/session"
          user: "{{ vcenter_user }}"
          password: "{{ vcenter_pass }}"
          force_basic_auth: yes
          method: GET
          body: "{}"
          body_format: json
          status_code: 200
          validate_certs: no
          return_content: true
      register: get_vms_list

    - name: Display VM list for VCenter
      debug:
          msg: "{{ get_vms_list.json }}"
...
      